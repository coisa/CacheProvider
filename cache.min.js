/**
* Cache Provider Library v2.0
* @author Felipe SayÃ£o Lobato Abreu
* @license MIT License (http://www.opensource.org/licenses/mit-license.php)
*/
window.CacheProvider=function(a,b){function e(a){this.name=a||"CacheProvider",this.cache=d.load(this.name),this.events=[]}var c={getContext:function(){var a=document.documentElement;return a.addBehavior("#default#userData"),a.load(document.domain),a},getNode:function(a,b){var f,g,c=b||this.getContext(),d=c.xmlDocument.documentElement.childNodes,e=d.length;for(g=0;e>g;g++)if(f=d.item(g),f.getAttribute("key")==a)return f;return null},get:function(a){var c=this.getNode(a);return c&&c.getAttribute("value")||b},set:function(a,b){var c=this.getContext(),d=this.getNode(a,c);return d?d.setAttribute("value",b):(d=xmlDoc.createNode(1,"item",""),d.setAttribute("key",a),d.setAttribute("value",b),c.xmlDocument.appendChild(d)),c.save(document.domain),b}},d={write:function(a,b,c){var d=b||"",e=d.split("."),f=a||{},g=e.shift();return g?(("object"!=typeof f[g]||"[object Array]"===Object.prototype.toString.call(f[g]))&&(f[g]={}),f[g]=e.length?this.write(f[g],e.join("."),c):c):f=c,f},read:function(a,b){var g,c=a||{},d=b||"",e=d.split("."),f=e.shift();return f?f in c&&(g=e.length?this.read(c[f],e.join(".")):c[f]):g=c,g},load:function(a){try{return JSON.parse(localStorage.getItem(a)||globalStorage&&globalStorage[document.domain].getItem(a))}catch(b){try{return JSON.parse(c.get(a)||{})}catch(d){return{}}}},save:function(a,b){var d=JSON.stringify(b);try{localStorage.setItem(a,d)||globalStorage&&globalStorage[domain].setItem(a,d)}catch(e){try{c.set(a,d)}catch(e){return!1}}return!0}};return e.prototype={constructor:e,get:function(a){return d.read(this.cache,a)},read:function(a){return this.get(a)},set:function(a,b){return d.write(this.cache,a,b),this.sync()},write:function(a,b){return this.set(a,b)},remove:function(a){if(a){var b=a.split("."),c=b.pop(),e=d.read(this.cache,b.join("."));e&&c in e&&e[c]&&delete e[c]}return this.sync()},del:function(a){return this.remove(a)},clear:function(){return this.cache={},this.sync()},check:function(a){var c=a.split("."),e=c.pop(),f=d.read(this.cache,c.join("."));return f&&e in f&&f[e]!==b},sync:function(){d.save(this.name,this.cache);for(var a=0;a<this.events.length;a++)this.events[a].call(this,this.cache);return this},bind:function(a){return"function"!=typeof a&&(a=function(){return a}),this.events.push(a),this}},e}(window);